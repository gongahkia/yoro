# ═══════════════════════════════════════════════════════════════════════════════
# YORO AUDIT TODO — generated 2026-02-15
# Priority: (A) = core vision/MVP/user-requested, (B) = audit-suggested improvement
# Tags: +feature +refactor +security +infra +perf +a11y +theme +css +fix +logo +pwa
# ═══════════════════════════════════════════════════════════════════════════════

# ─── USER-REQUESTED / CORE VISION (A) ────────────────────────────────────────

(A) Create Yoro logo using Google Nanobanana tool and add generated assets to asset/logo/, public/ (favicon.ico, icon.svg, apple-touch-icon.png, icon-192.png, icon-512.png), and update index.html and vite.config.ts PWA manifest to reference them +logo +infra

# ─── PERFORMANCE (B) ──────────────────────────────────────────────────────────

(B) Add virtualization to NoteList.tsx for the note card grid — implement windowed rendering or use react-window to handle 100+ notes without DOM bloat +perf
(B) Move KnowledgeGraph force-directed layout (100 sync iterations in src/components/KnowledgeGraph.tsx) to a Web Worker or requestIdleCallback to prevent main thread blocking +perf
(B) Add lazy loading for Mermaid diagrams in src/extensions/mermaid.ts — defer rendering until diagram is within viewport using IntersectionObserver +perf
(B) Add lazy loading for KaTeX math rendering in src/extensions/math.ts — defer until block is within viewport +perf
(B) Add native lazy loading attribute (loading="lazy") to all img elements in src/extensions/live-preview.ts and src/extensions/images.ts +perf
(B) Memoize node and edge computations in KnowledgeGraph.tsx (lines 360-432) with useMemo +perf
(B) Add loading state spinner during KnowledgeGraph layout computation to indicate progress +perf
(B) Add loading indicator during PDF/DOCX export in exportUtils.ts — long sync SVG-to-PNG conversions block UI +perf
(B) Add AbortController support to export operations so users can cancel long-running PDF/DOCX exports +perf
(B) Profile and optimize dagre layout in MindMap.tsx — layout recalculation is not debounced, triggers on every node add +perf
(B) Memoize sorted/filtered notes computation in NoteList.tsx — currently recomputes on every render +perf
(B) Replace inline arrow function callbacks in JSX across NoteList, BacklinksPanel, KnowledgeGraph with useCallback to prevent child re-renders +perf
(B) Add compression to localStorage via LZ-string (already in deps but unused in storage.ts) for large note collections approaching 5MB quota +perf

# ─── ACCESSIBILITY (B) ────────────────────────────────────────────────────────

(B) Implement focus trap in ConfirmationModal.tsx — Tab key should cycle within modal, not escape to background +a11y
(B) Implement focus trap in CommandPalette.tsx modal +a11y
(B) Implement focus trap in TableInsertModal.tsx modal +a11y
(B) Implement focus trap in ParameterInputModal.tsx modal +a11y
(B) Implement focus trap in HelpManual.tsx modal +a11y
(B) Implement focus trap in About modal (currently inline in App.tsx) +a11y
(B) Add role="combobox", aria-expanded, and aria-activedescendant to CommandPalette for keyboard nav screen reader support +a11y
(B) Add keyboard navigation (arrow keys) to NoteList card grid for non-mouse users +a11y
(B) Ensure all interactive elements in PresentationMode have visible focus indicators for keyboard navigation +a11y

# ─── CSS / THEMING FIXES (B) ──────────────────────────────────────────────────

(B) Replace hardcoded #ffcccc, #d00, #ffaaaa in NoteCard.css (lines 50-53) delete hover with themed CSS variables +css
(B) Replace hardcoded toast colors in Toast.css (lines 71-107) — #52c41a, #389e0d, #ff4d4f, #cf1322, #faad14, #d48806 — with CSS variables --toast-success, --toast-error, --toast-warning +css
(B) Replace hardcoded #ff6b6b in Editor.css (lines 251, 266) mermaid/syntax error color with var(--error-color) +css
(B) Replace hardcoded rgba colors in Editor.css (lines 67, 78, 235, 246, 259, 260) inline code/mermaid bg with theme vars +css
(B) Replace hardcoded syntax highlight colors in PresentationMode.css (lines 201-267) with CSS variables from theme +css
(B) Replace hardcoded syntax highlight colors in EditorThemeOverrides.css print section with theme-aware vars +css
(B) Remove color-mix() usage in KnowledgeGraph.css (line 225) — limited browser support (Safari <16.2), use pre-computed fallback +css
(B) Extract duplicated modal overlay CSS pattern (repeated in ConfirmationModal, CommandPalette, HelpManual, About, ImageLightbox, ParameterInput, TableInsert, QuickCapture) into shared .modal-overlay class +css +refactor
(B) Add @media (prefers-reduced-motion: reduce) to BacklinksPanel.css slide animations +css +a11y
(B) Add @media (prefers-reduced-motion: reduce) to ConfirmationModal.css fadeIn/scaleUp animations +css +a11y
(B) Add @media (prefers-reduced-motion: reduce) to ImageLightbox.css fadeIn animation +css +a11y
(B) Add @media (prefers-reduced-motion: reduce) to NoteList.css carousel/transition animations +css +a11y
(B) Add @media (prefers-reduced-motion: reduce) to PresentationMode.css slide transitions +css +a11y
(B) Add @media (prefers-reduced-motion: reduce) to Toast.css toast enter/exit animations +css +a11y
(B) Add @media (prefers-reduced-motion: reduce) to Editor.css bracket-pulse and cursor particle animations +css +a11y
(B) Add print-specific theme overrides in App.css that use theme vars instead of hardcoded black/white (lines 86-92) +css

# -- DRAWING FEATURE --

(B) In same contextual format as inserting existing mermaid diagrams, add a feature for users to write and draw (just take raw cursor input and export to SVG) to allow for inkscape like drawings natively within yoro

# ─── ERROR HANDLING (B) ───────────────────────────────────────────────────────

(B) Wrap KnowledgeGraph component with ErrorBoundary in App.tsx to catch layout/render failures +fix
(B) Wrap PresentationMode component with ErrorBoundary in App.tsx Route to catch rendering errors +fix
(B) Add try/catch around regex operations in BacklinksPanel.tsx (lines 54, 68) to handle malformed patterns +fix
(B) Add error display UI for invalid regex in FindReplacePanel.tsx instead of silent failure +fix
(B) Add fallback UI ("Note not found") with navigation back to home in NoteEditorWrapper when note is missing +fix
(B) Add broken-image placeholder in src/extensions/live-preview.ts for failed image loads +fix
(B) Add clipboard.writeText fallback using execCommand('copy') in code-block-enhancements.ts for older browsers +fix

# ─── MEMORY LEAKS / CLEANUP (B) ───────────────────────────────────────────────

(B) Add cleanup for setTimeout in FindReplacePanel.tsx replaceCurrentMatch (line ~217) — store ref and clear on unmount +fix
(B) Add cleanup for setTimeout in BacklinksPanel.tsx (line ~116) — store ref and clear on unmount +fix
(B) Verify all ViewPlugin instances in src/extensions/ have proper destroy() methods — audit mermaid.ts, live-preview.ts, wikilink-preview.ts, bracket-pulse.ts +fix
(B) Add AbortController to wikilinks.ts fetch() call and abort on extension destroy to prevent leaked promises +fix

# ─── FEATURE IMPROVEMENTS (B) ─────────────────────────────────────────────────

(B) Add undo/redo support to FlowchartBuilder.tsx — maintain a history stack of node/edge states +feature
(B) Add undo/redo support to StateDiagramBuilder.tsx — maintain a history stack of state/transition arrays +feature
(B) Add note import from .md files — file input in NoteList that reads markdown files and creates Note objects +feature
(B) Add batch import from .zip — extract multiple .md files from a ZIP and create Note objects for each +feature
(B) Add Cmd+K shortcut to open command palette (currently only Cmd+Shift+P) — Cmd+K is more discoverable for VS Code users +feature
(B) Add empty state illustration to NoteList when no notes exist — currently shows blank area +feature
(B) Add loading skeleton to NoteList while data initializes from localStorage +feature
(B) Add note pinning — pinned notes appear first regardless of sort order, add isPinned to Note type +feature
(B) Add word count goal indicator — optional target word count per note with progress bar in DocumentStats +feature
(B) Add auto-save indicator in Editor toolbar showing "Saved" / "Saving..." status +feature
(B) Add keyboard shortcut cheatsheet overlay accessible via Cmd+/ or from command palette +feature
(B) Add drag-and-drop reordering of notes in NoteList 2D view +feature
(B) Add note color/icon customization — per-note accent color or emoji icon shown on card +feature
(B) Add full-text search across all notes from the home view (currently search only filters by title/tag) +feature
(B) Add recent notes list (last 5 opened) accessible from command palette or sidebar +feature
(B) Implement the analytics.ts stub — add privacy-respecting local analytics (note count over time, words written per day) stored in localStorage +feature

# ─── INFRA / CI (B) ───────────────────────────────────────────────────────────

(B) Add Lighthouse CI check to GitHub Actions to catch perf/a11y regressions +infra

# ─── PWA (STRETCH GOAL) ──────────────────────────────────────────────────────

(B) After logo creation, generate PWA icon set from logo: icon-72.png, icon-96.png, icon-128.png, icon-144.png, icon-152.png, icon-192.png, icon-384.png, icon-512.png and place in public/ +pwa +logo
(B) Update vite.config.ts PWA manifest icons array to reference all generated icon sizes with correct MIME types +pwa
(B) Add offline fallback page to PWA service worker config — show cached version of app when network unavailable +pwa
(B) Add "Add to Home Screen" prompt logic in App.tsx using beforeinstallprompt event +pwa
(B) Test PWA install flow on Chrome, Safari, Firefox and fix any manifest validation errors +pwa

# ─── TYPESCRIPT STRICTNESS (B) ────────────────────────────────────────────────

(B) Add runtime validation for CommandParameter values in ParameterInputModal.tsx before passing to action callback +refactor
(B) Add runtime validation for parsed TOML config values in App.tsx config sync useEffect — validate types match UserPreferences interface +refactor
(B) Add Zod or manual type guard for share link JSON parsing in App.tsx (line ~369) to prevent malformed data creating invalid Note objects +refactor +security


# ═══════════════════════════════════════════════════════════════════════════════
# END
# ═══════════════════════════════════════════════════════════════════════════════
