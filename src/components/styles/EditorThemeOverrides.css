/* Wiki Links */
.cm-wikilink {
    color: var(--primary);
    text-decoration: none;
    cursor: pointer;
}

.cm-wikilink:hover {
    text-decoration: underline;
}

/* Standard Markdown Links */
.cm-md-link {
    cursor: pointer;
    /* Optional: subtle hint it's interactive */
    text-decoration: underline;
    text-underline-offset: 2px;
}

/* Styling for inline code when backticks are hidden */
.cm-inline-code-styled {
    background-color: rgba(150, 150, 150, 0.15);
    border-radius: 4px;
    padding: 0.1em 0.3em;
    font-family: 'SF Mono', 'Menlo', 'Monaco', 'Courier New', monospace;
    font-size: 0.9em;
    color: var(--primary);
    /* Optional: make it pop or keep text-primary */
}

/* Styling for active inline code (cursor inside) */
.cm-inline-code-active {
    background-color: rgba(150, 150, 150, 0.1);
    border-radius: 4px;
}

/* Ensure code blocks have a background and distinct look */
.cm-content .cm-codeblock {
    font-family: 'SF Mono', 'Menlo', 'Monaco', 'Courier New', monospace;
    font-size: 0.9em;
}

/* Gutter styling (line numbers) */
.editor-cm-wrapper .cm-gutters {
    background-color: var(--editor-gutter-bg, var(--bg-primary)) !important;
    color: var(--editor-gutter-text, #999) !important;
    border-right: 1px solid var(--border-color);
}

.editor-cm-wrapper .cm-activeLineGutter {
    background-color: var(--primary-light) !important;
    color: var(--text-primary) !important;
}

/* Force Editor Background */
.editor-cm-wrapper .cm-editor {
    height: 100%;
    background-color: var(--editor-bg, var(--bg-primary)) !important;
    color: var(--text-primary) !important;
}

.editor-cm-wrapper .cm-scroller {
    font-family: 'SF Mono', 'Menlo', 'Monaco', 'Courier New', monospace;
    line-height: 1.6;
    background-color: var(--editor-bg, var(--bg-primary)) !important;
}

.editor-cm-wrapper .cm-content {
    caret-color: var(--caret-color, var(--text-primary)) !important;
    min-width: 100%;
    /* Ensure content takes full width */
    background-color: var(--editor-bg, var(--bg-primary)) !important;
}

.editor-cm-wrapper .cm-activeLine {
    background-color: var(--primary-light-active) !important;
    width: 100% !important;
    /* Force active line to be full width */
    display: inline-block;
    /* Ensure block-like geometry for background */
}

/* Fix for centered text having full width background */
.editor-align-center .cm-line {
    text-align: center;
}

.editor-cm-wrapper .cm-cursor {
    border-left-color: var(--caret-color, var(--text-primary)) !important;
}

/* Ensure editor container background matches */
.editor-container {
    background-color: var(--editor-bg, var(--bg-primary)) !important;
}

/* Vim Visual Mode Selection */
.editor-cm-wrapper .cm-selectionBackground {
    background-color: var(--selection-bg, rgba(0, 123, 255, 0.3)) !important;
}

.editor-cm-wrapper .cm-editor.cm-focused .cm-selectionBackground {
    background-color: var(--selection-bg, rgba(0, 123, 255, 0.3)) !important;
}

/* Vim visual line mode - ensure full line selection */
.editor-cm-wrapper .cm-selectionLayer .cm-selectionBackground {
    background-color: var(--selection-bg, rgba(0, 123, 255, 0.3)) !important;
}

/* Vim fat cursor for normal mode */
.editor-cm-wrapper .cm-fat-cursor .cm-cursor {
    background-color: var(--caret-color, var(--text-primary)) !important;
    border: none !important;
    opacity: 0.7;
}

.editor-cm-wrapper .cm-fat-cursor-mark {
    background-color: var(--caret-color, var(--text-primary)) !important;
    opacity: 0.7;
}